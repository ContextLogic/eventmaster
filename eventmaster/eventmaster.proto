syntax = "proto3";

package eventmaster;

// Define the event store API
service EventMaster {
    rpc Track (Event) returns (WriteResponse) {}
    rpc GetEvents (Query) returns (stream Event) {}
    rpc Healthcheck(HealthcheckRequest) returns (HealthcheckResponse) {}
}

message Event {
    int64 timestamp = 1;
    string dc = 2;
    string topic_name = 3;
    repeated string tags = 4;
    string host = 5;
    string user = 6;
    string data = 7;
}

message WriteResponse {
    int32 errcode = 1;
    string errmsg = 2;
}

message Query {
    string dc = 1;
    string host = 2;
    string topic = 3;`
    int64 timestart = 4;
    int64 timeend = 5;
}

message HealthcheckRequest {}

message HealthcheckResponse {
    string response = 1;
}
